# 査読判定レポート

## 1. 採否判定
**Weak Reject**

## 2. 必須修正事項（致命度順）

### 1) RQとコントリビューションの不整合（致命度: 最高）
- **問題**: RQ4で「抽出判定器の健全性/完全性」を問うているが、定理10は単一事例（パスワード長制約）のみで証明され、一般性が欠如している。
- **修正箇所**: `paper/manuscript/uadf_u0_spec_proof.md` §1, §3, `paper/lean/UadfU0/CaseStudy/PasswordPolicy.lean`
- **必須対応**: 
  - RQ4を「具体事例における判定器同値性の証明可能性」に狭める、または
  - 一般的な抽出器クラスに対する parameterized theorem を追加する

### 2) 形式化と本文の乖離（致命度: 高）
- **問題**: 本文定義2.3で `f_{0i}^{-1}(S) := \{x \in Ω \mid \exists y \in β_i, proj_i(x)=some(y) \land y \in S\}` とあるが、Lean実装の `preimage` 定義は `fun x => ∃ y, M.proj i x = some y ∧ y ∈ S` であり、`x ∈ Ω` の明示的束縛が欠落している。
- **修正箇所**: `paper/manuscript/uadf_u0_spec_proof.md` §2.3, `paper/lean/UadfU0/Definitions/Model.lean:32-33`
- **必須対応**: 本文の集合内包記法とLean関数定義の対応関係を明示的に述べる補注を追加

### 3) 「自明性」弁護の不十分性（致命度: 中）
- **問題**: §4で「定理1,2,5,8は集合論の古典的事実に近い」と自認しながら、なぜ機械検証が必要かの説得力が弱い。型付き設定と部分射影の組合せが「既存証明の単純移植では済まない」ことを示す具体的障害点の記述が無い。
- **修正箇所**: `paper/manuscript/uadf_u0_spec_proof.md` §4, `uadf_u0_spec_proof.tex` Abstract後半
- **必須対応**: Leanでの証明時に遭遇した型検証上の非自明点（例: `Option.bind` の正規化、`SpecSet` membership instance定義の必要性等）を1-2段落で技術的に記述

### 4) 評価の妥当性欠如（致命度: 中）
- **問題**: §5.4で合成データ200,000件のベンチマークを示すが、「スループット267,334ケース/秒」が何を検証しているか不明。形式証明論文で計算速度を示すのは通常無意味（証明は1回通れば十分）。実証評価ならば、実プロジェクトの要求/API/実装から抽出した矛盾率の実例が必須。
- **修正箇所**: `paper/manuscript/uadf_u0_spec_proof.md` §5.4, `paper/case-study/password_policy_benchmark.py`
- **必須対応**: 
  - 合成データ評価を削除、または
  - 実際のOSSプロジェクト（例: OpenSSL、PostgreSQL）の仕様記述から抽出した3層アーティファクトで矛盾検出を実証

### 5) 関連研究との差異化不足（致命度: 低）
- **問題**: §6でCousot、Goguen、Lamportに触れるが、「なぜこれらの既存枠組みでは不足なのか」が抽象的記述に留まる。特にGalois接続による抽象解釈との関係が「親和的」とだけ述べて終わっている。
- **修正箇所**: `paper/manuscript/uadf_u0_spec_proof.md` §6, `uadf_u0_spec_proof.tex` §6
- **必須対応**: Galois接続での `α` と `γ` が本稿の `proj` と `preimage` とどう対応（または対応しない）するかを2-3文で技術的に比較

## 3. 4軸採点（各10点満点）

- **新規性**: 4/10  
  型付きUAD/fモデルの明示化とLean機械化は価値があるが、定理群の大半が既知集合論の変種。

- **技術的妥当性**: 7/10  
  Leanコードは `lake build` 成功を確認済みで形式的に健全。ただしRQ4の一般性欠如とベンチマーク評価の論点不一致がマイナス。

- **再現性**: 9/10  
  Lean toolchain固定、LOC明示、ビルド手順完備で高評価。ただし実データ抽出器は未公開。

- **可読性**: 6/10  
  本文とLeanの対応は追跡可能だが、§4の自明性議論と§5.4のベンチマーク意義が不明瞭で読者混乱を招く。

## 4. 現版の最大の強み（2点のみ）

1. **部分射影の具体化**: `f^{-1}` をブラックボックス記号でなく `proj : Ω → Option β_i` から誘導定義した点は、型理論実装における明快なデザイン選択として評価できる。

2. **層間合成則の証明**: 定理9（`preimage_compose`）により、`proj_j = bind(proj_i, g)` 下での逆像保存則を示したことは、実装時の抽出器チェーン検証に応用可能な具体的貢献。
